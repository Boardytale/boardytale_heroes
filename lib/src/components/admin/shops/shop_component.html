<div class="row">
    <div class="col-lg-3">
        <h1 class="my-4">Obchody</h1>
        <div class="list-group">
            <a
                    *ngFor="let shop of shops"
                    href="javascript:"
                    class="list-group-item"
                    (click)="selectShop(shop)"
                    [ngClass]="{'active': shop == shopsService.selected}"
            >{{shop.name}}</a>
            <a href="#" class="list-group-item" (click)="createShop()">Vytvořit obchod</a>
            <a href="#" class="list-group-item" (click)="itemsVisible = !itemsVisible">{{itemsVisible?"Skrýt všechny předměty": "Zobrazit všechny předměty"}}</a>
        </div>
    </div>
    <div class="col-lg-9">
        <div *ngIf="shopsService.selected != null">
            <div *ngIf="!shoppingMode">
                <h1>Nový obchod</h1>
                Jméno: <input [(ngModel)]="shopsService.selected.name"><br>
                Popis: <input [(ngModel)]="shopsService.selected.description"><br>

                <div *ngFor="let item of shopsService.selected.items">
                    {{item.item.name}} - {{item.quantity == 0? "vyprodáno": item.quantity}}
                    <button (click)="increaseQuantity(item, 1)">+</button>
                    <button (click)="increaseQuantity(item, 10)">+10</button>
                    <button (click)="increaseQuantity(item, 100)">+100</button>
                    <button (click)="resetQuantity(item)">0</button>
                    <button (click)="removeItem(item)">remove</button>

                    Cena: <input type="number" [(ngModel)]="item.price" step="1" (change)="priceChanged()">
                </div>

                <button (click)="createShop()">{{shopsService.selected.id == null? "Vytvoř nový obchod": "Uprav obchod"}}</button>
                <button (click)="shoppingMode = !shoppingMode">Nákupní mód</button>
            </div>
            <div *ngIf="shoppingMode">
                <h1>{{shopsService.selected.name}}</h1>
                <p>{{shopsService.selected.description}}</p>
                <div class="card-deck">
                    <div *ngFor="let item of shopsService.selected.items" class="item-preview col-4 item-tile">
                        <div class="row">
                            <div class="col-12">
                                <div class="row">
                                    <div class="item-preview__requirements" class="col-8">
                                        <strong>{{item.item.name}} - {{item.item.getType()}}</strong><br>
                                        <span>Hmotnost: {{item.item.weight}}</span><br>
                                        <span *ngIf="item.item.type == 'weapon'">Základní útok: {{item.item.baseAttack}}<br></span>
                                        <span *ngIf="item.item.type == 'weapon'">Bonusový útok: {{item.item.bonusAttack}}<br></span>
                                        <button *ngIf="heroesService.selected != null" (click)="buy(item)">Koupit</button>
                                    </div>
                                    <div class="item-preview__bonuses" class="col-4">
                                        <strong>Bonusy:</strong><br>
                                        <span *ngIf="item.item.strengthBonus > 0">Síla: {{item.item.strengthBonus}}<br></span>
                                        <span *ngIf="item.item.agilityBonus > 0">Obratnost: {{item.item.agilityBonus}}<br></span>
                                        <span *ngIf="item.item.intelligenceBonus > 0">Inteligence: {{item.item.intelligenceBonus}}<br></span>
                                        <span *ngIf="item.item.armorPoints > 0">Body zbroje: {{item.item.armorPoints}}<br></span>
                                        <span *ngIf="item.item.manaBonus > 0">Bonusová mana: {{item.item.manaBonus}}<br></span>
                                        <span *ngIf="item.item.spiritualityBonus > 0">Bonusová spiritualita: {{item.item.spiritualityBonus}}<br></span>
                                        <span *ngIf="item.item.precisionBonus > 0">Bonusová preciznost: {{item.item.precisionBonus}}<br></span>
                                        <span *ngIf="item.item.energyBonus > 0">Bonusová energie: {{item.item.energyBonus}}<br></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <strong>Cena: {{item.price}}</strong>
                                    </div>
                                    <div class="col-6">
                                        <strong>Kusů na skladě: {{item.quantity == 0? "vyprodáno": item.quantity}}</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button (click)="shoppingMode = !shoppingMode">Editace obchodu</button>
            </div>
        </div>
    </div>
</div>